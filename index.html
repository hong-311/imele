<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>아이멜리</title>
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <main>
        <div class="head_top">
            <ul class="notice_wrap">
                <li class="notice_item">공식몰 오픈 이벤트 신규 회원가입 시 5,000P 적립</li>
                <li class="notice_item">회원가입 후 구매 시 신상품 5% 할인</li>
            </ul>
        </div>
        
        <div id="header-placeholder"></div>

        <section class="swiper-container">
            <div class="swiper mySwiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <img src="./img/banner1.png" class="banner_img" alt="ACTIVE BOTANICAL REFINGING TONER 배너">
                        <img src="./img/banner2_mo.jpg" class="banner_img_mo" alt="ACTIVE BOTANICAL REFINGING TONER 모바일 배너">
                        <div class="banner_text">
                            <strong class="item_title">ACTIVE BOTANICAL REFINGING TONER</strong>
                            <span class="item_details">5 FL OZ / 150 ML</span>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <img src="./img/banner2.png" class="banner_img" alt="HAIR PERFIME AMPOULE MIST 배너">
                        <img src="./img/banner2_mo.jpg" class="banner_img_mo" alt="HAIR PERFIME AMPOULE MIST 모바일 배너">
                        <div class="banner_text">
                            <strong class="item_title">HAIR PERFIME AMPOULE MIST</strong>
                            <span class="item_details">5 FL OZ / 250 ML</span>
                        </div>
                    </div>
                </div>
                <div class="swiper-button-next"><img src="./img/banner_forward.png" class="banner_arrow" alt="배너 다음 화살표"></div>
                <div class="swiper-button-prev"><img src="./img/banner_back.png" class="banner_arrow" alt="배너 이전 화살표"></div>
                <div class="swiper-pagination swiper-pagination-fraction"></div>
                <div class="swiper-pagination swiper-pagination-dots"></div>
            </div>
        </section>
        
        <section class="section1">
            <div class="inner">
                <div class="top">
                    <h2 class="title">Bestseller</h2>
                    <a href="#" class="more">View all <img src="./img/more_arrow.png" class="more_arrow" alt="더 보기 화살표"></a>
                </div>
                <ul class="product_wrap">
                    <li class="product_list">
                        <a href="#" class="product">
                            <img src="./img/product1.png" class="product_img" alt="핑크로즈 미라클 엑소좀 앰플">
                            <h3 class="product_name">핑크로즈 미라클 엑소좀 앰플</h3>
                            <p class="product_description">잡티와 주름을 케어하며 촉촉하고 맑은 피부를 선사하는 고농축 앰플.</p>
                            <span class="product_price">45,000원</span>
                        </a>
                    </li>
                    <li class="product_list">
                        <a href="#" class="product">
                            <img src="./img/product2.png" class="product_img" alt="블루마린 에너지 수분 크림">
                            <h3 class="product_name">블루마린 에너지 수분 크림</h3>
                            <p class="product_description">깊은 보습으로 생기와 윤기를 더해주는 고보습 수분 크림</p>
                            <span class="product_price">38,000원</span>
                        </a>
                    </li>
                    <li class="product_list">
                        <a href="#" class="product">
                            <img src="./img/product3.png" class="product_img" alt="그린시카 릴렉스 워시오프 팩">
                            <h3 class="product_name">그린시카 릴렉스 워시오프 팩</h3>
                            <p class="product_description">민감한 피부를 진정시키고 맑고 투명한 피부로 가꿔주는 워시오프 팩.</p>
                            <span class="product_price">23,000원</span>
                        </a>
                    </li>
                    <li class="product_list">
                        <a href="#" class="product">
                            <img src="./img/product4.png" class="product_img" alt="핑크로즈 미라클 엑소좀 마스크팩 (3EA)">
                            <h3 class="product_name">핑크로즈 미라클 엑소좀 마스크팩 (3EA)</h3>
                            <p class="product_description">장미 성분으로 촉촉함과 생기를 부여하는 피부 진정 마스크팩</p>
                            <span class="product_price">20,000원</span>
                        </a>
                    </li>
                </ul>
            </div>
        </section>

        <section class="section2">
            <div class="inner_box">
                <div class="inner">
                    <div class="left">
                        <div class="left_iframe">
                            <iframe data-src="https://www.youtube.com/embed/473pdiWbbGs?autoplay=1&amp;mute=1&amp;rel=0&amp;controls=0&amp;showinfo=0&amp;modestbranding=1&amp;loop=1&amp;start=3&amp;playlist=473pdiWbbGs" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>
                        </div>
                    </div>
                    <div class="right">
                        <span class="right_top">Meet the Founders</span>
                        <div class="right_bottom">
                            <pre class="right_text">우리는 필요 이상으로 너무 많은 제품들을 사용하고 있는 것은 아닐까? 
                                모든 피부 타입에 자극없이 사용할 수 있는 미니멀리즘 뷰티를 제안합니다.</pre>
                            <pre class="right_text_mo">우리는 필요 이상으로 너무 많은 제품들을 사용하고 있는 것은 아닐까? 모든 피부 타입에 자극없이 사용할 수 있는 미니멀리즘 뷰티를 제안합니다.</pre>
                            <a href="#"><span>Read more</span></a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section3">
            <ul class="inline_list">
                <li class="animate animate-up"><a href="#"><img src="./img/icon5.png" class="icon" alt="천연 유래 성분 아이콘"><span class="bold">#Plant-Based</span><span class="text">천연 유래 성분</span></a></li>
                <li class="animate animate-down"><a href="#"><img src="./img/icon6.png" class="icon" alt="유기농 재료 사용 아이콘"><span class="bold">#Organic</span><span class="text">유기농 재료 사용</span></a></li>
                <li class="animate animate-up"><a href="#"><img src="./img/icon7.png" class="icon" alt="식물성 원료 함유 아이콘"><span class="bold">#Vegan</span><span class="text">식물성 원료 함유</span></a></li>
                <li class="animate animate-down"><a href="#"><img src="./img/icon8.png" class="icon" alt="동물 실험 반대 아이콘"><span class="bold">#Crulty Free</span><span class="text">동물 실험 반대</span></a></li>
            </ul>
        </section>

        <section class="section4">
            <div class="inner">
                <div class="top">
                    <h2 class="title">Promotion</h2>
                    <a href="#" class="more">View all <img src="./img/more_arrow.png" class="more_arrow" alt="더 보기 화살표"></a>
                </div>
            </div>
        </section>

        <section class="section5">
            <div class="inner">
                <div class="top">
                    <h2 class="title">Real Review</h2>
                    <a href="#" class="more">View all <img src="./img/more_arrow.png" class="more_arrow" alt="더 보기 화살표"></a>
                </div>
                <p class="ment">"We make honest, natural and toxic-free<br>cosmetics without harming yourself"</p>
            </div>
            <div class="sns_wrap">
                <img src="./img/sns_icon1.jpg" class="sns_icon" alt="SNS 아이콘 1">
                <img src="./img/sns_icon2.jpg" class="sns_icon" alt="SNS 아이콘 2">
                <img src="./img/sns_icon3.jpg" class="sns_icon" alt="SNS 아이콘 3">
                <img src="./img/sns_icon4.jpg" class="sns_icon" alt="SNS 아이콘 4">
                <img src="./img/sns_icon5.jpg" class="sns_icon" alt="SNS 아이콘 5">
                <img src="./img/sns_icon6.jpg" class="sns_icon" alt="SNS 아이콘 6">
            </div>
        </section>

        <div id="footer-placeholder"></div>
    </main>

<!-- 1. 헤더 로드 -->
<script>
    $(document).ready(function () {
        $("#header-placeholder").load("header.html", function (response, status, xhr) {
            if (status == "error") {
                console.error("헤더 로드 오류:", xhr.status, xhr.statusText);
            }
        });
    });
</script>

<!-- 2. 공지사항 애니메이션 -->
<script>
    $(document).ready(function () {
        function startNoticeAnimation() {
            const notices = $(".notice_item");
            let currentIndex = 0;

            function showNextNotice() {
                notices.removeClass("active");
                $(notices[currentIndex]).addClass("active");
                currentIndex = (currentIndex + 1) % notices.length;
            }

            showNextNotice();
            setInterval(showNextNotice, 3000);
        }
        startNoticeAnimation();
    });
</script>

<!-- 3. Swiper 초기화 -->
<!-- Swiper JS -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<script>
    $(document).ready(function () {
        var swiper = new Swiper(".mySwiper", {
            effect: "fade",
            fadeEffect: { crossFade: true },
            autoplay: {
                delay: 3000,
                disableOnInteraction: false,
            },
            allowTouchMove: false,
            pagination: {
                el: ".swiper-pagination-fraction",
                type: "fraction",
            },
            navigation: {
                nextEl: ".swiper-button-next",
                prevEl: ".swiper-button-prev",
            },
            on: {
                init: function () {
                    $(".banner_text").addClass("animation");
                },
                slideChange: function () {
                    $(".banner_text").removeClass("animation");
                    setTimeout(function () {
                        $(".banner_text").addClass("animation");
                    }, 100);
                    $(".swiper-pagination-dots .swiper-pagination-bullet").removeClass("swiper-pagination-bullet-active");
                    $(".swiper-pagination-dots .swiper-pagination-bullet").eq(swiper.realIndex).addClass("swiper-pagination-bullet-active");
                }
            }
        });

        new Swiper(".mySwiper", {
            pagination: {
                el: ".swiper-pagination-dots",
                type: "bullets",
                clickable: true,
            },
        });
    });
</script>

<!-- 4. Section 1 -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const section1 = document.querySelector(".section1");
        const productWrap = document.querySelector(".product_wrap");
        const products = document.querySelectorAll(".product_list");
        const totalSlides = products.length;
        const visibleSlides = 2; // 한 번에 보이는 슬라이드 개수
        const gap = 10; // gap 값
    
        let slideIndex = 0;
        let slideInterval;
    
        // 슬라이드 기능을 활성화하는 함수
        function autoSlide() {
            slideIndex++;
            if (slideIndex >= totalSlides - visibleSlides + 1) {
                slideIndex = 0; // 마지막 슬라이드까지 갔다면 처음으로
            }
    
            // 각 슬라이드가 50%이고, 두 개씩 보이므로 gap(15px)을 추가하여 이동 거리 계산
            const moveDistance = slideIndex * (50 + (gap / (productWrap.offsetWidth / 100))); // 50% + gap 만큼 이동
            productWrap.style.transform = `translateX(-${moveDistance}%)`; // 정확한 위치로 이동
        }
    
        // 화면 너비가 1000px 이하일 때만 슬라이드 기능을 활성화
        function initSlider() {
            if (window.innerWidth <= 1000) {
                if (!slideInterval) {
                    slideInterval = setInterval(autoSlide, 3000); // 3초마다 자동으로 슬라이드 이동
                }
            } else {
                clearInterval(slideInterval); // 화면 너비가 1000px 이상이면 슬라이드 비활성화
                slideInterval = null; // 슬라이드 타이머 초기화
                productWrap.style.transform = "translateX(0%)"; // 슬라이드 초기화
            }
        }
    
        // 화면이 로드될 때 슬라이드를 활성화 또는 비활성화
        initSlider();
    
        // 창 크기가 변경될 때마다 슬라이드 기능을 활성화 또는 비활성화
        window.addEventListener('resize', function () {
            initSlider(); // 리사이즈 시 슬라이드 상태 확인
        });

        // IntersectionObserver를 사용하여 .section1이 화면에 들어올 때 애니메이션을 추가
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add("in-view");
                    observer.unobserve(entry.target); // 관찰 중지
                }
            });
        }, { threshold: 0.1 });

        observer.observe(section1); // .section1에 대해 관찰 시작
    });
</script>


<!-- 5. Section 2 -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const section2LeftIframe = document.querySelector(".section2 .left iframe");
        const section2Right = document.querySelector(".section2 .right");

        const videoObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const iframe = entry.target;
                    const src = iframe.getAttribute("data-src");
                    iframe.setAttribute("src", src);
                    videoObserver.unobserve(iframe);
                }
            });
        }, { threshold: 0.5 });

        videoObserver.observe(section2LeftIframe);

        const textObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add("visible");
                    textObserver.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });

        textObserver.observe(section2Right);
    });
</script>

<!-- 6. Section 3  -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const elements = document.querySelectorAll(".section3 .inline_list .animate");

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add("active");
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.5 });

        elements.forEach(el => observer.observe(el));
    });
</script>
<!-- 7. Section 4 -->
<script>
// 요소가 화면에 들어왔는지 확인하는 함수
function isElementInView(element) {
    const rect = element.getBoundingClientRect();
    return (
        rect.top >= 0 &&
        rect.left >= 0 &&
        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
        rect.right <= (window.innerWidth || document.documentElement.clientWidth)
    );
}

// 스크롤 시 섹션이 화면에 보이면 'in-view' 클래스를 추가
window.addEventListener('scroll', () => {
    const section = document.querySelector('.section4');
    if (isElementInView(section)) {
        section.classList.add('in-view');
    }
});

</script>
<!-- 8. Section 5 -->
<script>
  // 요소가 화면에 들어왔는지 확인하는 함수
function isElementInView(element) {
    const rect = element.getBoundingClientRect();
    return (
        rect.top < window.innerHeight &&  // 요소의 top이 화면 안에 일부라도 보일 때
        rect.bottom >= 0 &&  // 요소의 bottom이 화면의 상단을 지나지 않으면
        rect.left < window.innerWidth &&  // 요소의 left가 화면 안에 일부라도 보일 때
        rect.right >= 0  // 요소의 right가 화면을 지나지 않으면
    );
}

// 스크롤 시 섹션이 화면에 보이면 'in-view' 클래스를 추가
window.addEventListener('scroll', () => {
    const section5 = document.querySelector('.section5');
    const mentElement = document.querySelector('.section5 .ment'); // ment 요소 선택
    const snsWrap = document.querySelector('.section5 .sns_wrap'); // sns_wrap 요소 선택

    // section5가 화면에 보이면 'in-view' 클래스 추가
    if (isElementInView(section5)) {
        section5.classList.add('in-view');
        
        // ment 요소가 화면에 보이면 'visible' 클래스 추가 (애니메이션 적용)
        if (isElementInView(mentElement)) {
            mentElement.classList.add('visible');
        }
        
        // sns_wrap 요소가 화면에 보이면 'visible' 클래스 추가
        if (isElementInView(snsWrap)) {
            snsWrap.classList.add('visible');
        }
    }
});

</script>
<!-- footer 로드 스크립트 -->
<script>
    $(document).ready(function () {
        $("#footer-placeholder").load("footer.html", function (response, status, xhr) {
            if (status == "error") {
                console.error("푸터 로드 오류:", xhr.status, xhr.statusText);
            }
        });
    });
</script>
</body>
</html>
